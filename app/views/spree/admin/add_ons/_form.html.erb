<div data-hook="admin_tax_category_form_fields">
  <div class="row">
    <div class="omega six columns">
      <%= f.field_container :name do %>
          <%= f.label :name, Spree.t(:name) %>
          <%= f.text_field :name, :class => 'fullwidth', placeholder: 'Add On name' %>
      <% end %>
    </div>
    <div class="omega four columns">
      <%= f.field_container :sku do %>
          <%= f.label :sku, "SKU" %><br>
          <%= f.text_field :sku, :class => 'fullwidth', placeholder: 'ABC-123' %>
      <% end %>
    </div>
    <div class="two columns omega">
      <%= f.field_container :active do %>
          <%= f.label :active, "Active" %><br>
          <%= f.check_box :active, {}, "true", "false" %>
      <% end %>
    </div>
  </div>

  <div class="row">
    <div class="four columns omega">
      <% field_name = "[add_on][calculator_type]" %>
      <%= label_tag field_name, Spree.t(:calculator) %>
      <%= select_tag field_name, options_from_collection_for_select(@calculators, :to_s, :description), :class => 'type-select select2 fullwidth' %>
    </div>

    <% if @add_on.calculator.present? %>
        <div class="add-on-calculator field omega four columns">
          <% param_prefix = "add_on" %>
          <% type_name = @add_on.calculator.type.demodulize.underscore %>
          <% if lookup_context.exists?("fields", ["spree/admin/promotions/calculators/#{type_name}"], true) %>
              <%= render "spree/admin/promotions/calculators/#{type_name}/fields", calculator: @add_on.calculator, prefix: param_prefix %>
          <% else %>
              <%= render "spree/admin/promotions/calculators/default_fields", calculator: @add_on.calculator, prefix: param_prefix %>
          <% end %>
          <%= hidden_field_tag "#{param_prefix}[calculator_attributes][id]", @add_on.calculator.id %>
        </div>
    <% end %>
  </div>

  <div class="row">
    <div class="eight columns omega">
      <%= f.field_container :option_types do %>
          <%= f.label :option_type_ids, Spree.t(:option_types) %>
          <%= f.hidden_field :option_type_ids, :value => @add_on.option_type_ids.join(','), class: 'fullwidth' %>
      <% end %>
    </div>
  </div>

  <div class="row">
    <div class="eight columns omega">
      <%= f.field_container :option_inputs do %>
          <%= preference_fields(@add_on, f) %>
          <small>Comma separated list of inputs.</small>
      <% end %>
    </div>
  </div>

  <div class="row">
    <div class="eight columns omega">
      <%= f.field_container :description do %>
          <%= f.label :description, "Description" %><br>
          <%= f.text_area :description, class: "fullwidth", placeholder: 'Something about this add on' %>
      <% end %>
    </div>
  </div>


  <div class="row">
    <%= f.fields_for :images, Spree::Image.new do |img| %>
        <% unless @images.empty? %>
            <div class="four columns omega">
              <% @images.each do |image| %>
                  <div data-hook="thumbnail" class="field alpha three columns align-center">
                    <%= f.label Spree.t(:thumbnail) %><br>
                    <%= image_tag image.attachment.url(:small) %>
                  </div>
              <% end %>
            </div>
        <% end %>

        <div class="eight columns omega">
          <div data-hook="file" class="field">
            <%= img.label :attachment, Spree.t(:filename) %><br>
            <%= img.file_field :attachment %>
            <%= img.hidden_field :viewable_id, :value => @add_on.id %>
          </div>
        </div>
    <% end %>
  </div>

</div>